@model HeadMasterVM;
<style type="text/css">
    .profile{
        float: right;
        padding: 10px;
        margin-top: 10px;
        margin-right: 30px;
    }
</style>
<div class="container" style="margin-top:20px">
    <div class="row">
        <div class="card">
            <div class="card-header">
                <b>প্রধান শিক্ষকের তথ্য হালনাগাদ করুন</b>
            </div>
            <div class="card-body">
                <div class="col-12">
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group row mb-4">
                                <label class="col-sm-2 col-form-label-sm">নামঃ</label>
                                <div class="col-sm-8">
                                    <input type="text" id="name" value="@Model.Name" class="form-control" />
                                </div>
                            </div>
                            <div class="form-group row mb-4">
                                <label class="col-sm-2 col-form-label-sm">বিস্তারিতঃ</label>
                                <div class="col-sm-10">
                                    <textarea id="details" rows="8" cols="50">@Model.Details</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group row mb-4">
                                <label class="col-sm-2 col-form-label-sm">ছবিঃ</label>
                                <div class="col-sm-10">
                                    <img alt="HeadMaster" src="@Model.Image" style="border-style:solid; border-width:0px; height:176px; margin-left:40px; margin-right:40px; width:150px" />
                                </div>
                                <div class="col-sm-10">
                                    <input type="file" id="img">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <button id="save" class="btn btn-success btn-sm profile">হালনাগাদ করুন</button>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts{
    <script>
        $(document).ready(function() {
        });
        $("#img").change(function(e) {
            for (var i = 0; i < e.originalEvent.srcElement.files.length; i++) {

                var file = e.originalEvent.srcElement.files[i];

                var img = document.createElement("img");
                var reader = new FileReader();
                reader.onloadend = function() {
                    img.src = reader.result;
                    img.width = 350;
                    img.height = 200;
                }
                reader.readAsDataURL(file);
                $("#img").after(img);
            }
        });
        $("#save").click(function() {
            var formData = new FormData();
            var totalFiles = document.getElementById("img").files.length;
            for (var i = 0; i < totalFiles; i++) {
                var file = document.getElementById("img").files[i];
                formData.append("imgFiles", file);
            }
            var name = $('#name').val();
            var details = $('#details').val();
            $.ajax({
                type: "POST",
                url: '/Admin/AdminPanel/SaveHeadMaster?name=' + name + '&details=' + details,
                data: formData,
                dataType: 'json',
                contentType: false,
                processData: false,
                success: function(response) {
                    alertify.success("Successfully Updated");
                }
            });
        });
    </script>
}